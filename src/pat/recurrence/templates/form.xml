<div class="riform">
    <form>
        <h1><%= localization.title %></h1>
        <div id="messagearea" style="display: none;">
        </div>
        <div id="rirtemplate">
            <label for="<%= name %>rtemplate" class="label">
                <%= localization.recurrenceType %>
            </label>
            <select id="rirtemplate" name="rirtemplate" class="field">
                <% for(const tpl of rtemplate) { %>
                    <option value="<%= $index %>"><%= tpl %></value>
                <% } %>
            </select>
        <div>
        <div id="riformfields">
            <div id="ridailyinterval" class="rifield">
                <label for="<%= name %>dailyinterval" class="label">
                    <%= localization.dailyInterval1 %>
                </label>
                <div class="field">
                    <input type="text" size="2"
                        value="1"
                        name="ridailyinterval"
                        id="<%= name %>dailyinterval" />
                    <%= localization.dailyInterval2 %>
                </div>
            </div>
            <div id="riweeklyinterval" class="rifield">
                <label for="<%= name %>weeklyinterval" class="label">
                    <%= localization.weeklyInterval1 %>
                </label>
                <div class="field">
                    <input type="text" size="2"
                        value="1"
                        name="riweeklyinterval"
                        id="<%= name %>weeklyinterval"/>
                    <%= localization.weeklyInterval2 %>
                </div>
            </div>
            <div id="riweeklyweekdays" class="rifield">
                <label for="<%= name %>weeklyinterval" class="label"><%= localization.weeklyWeekdays %></label>
                <div class="field">
                    <% for(const weekday of orderedWeekdays) { %>
                        <div class="riweeklyweekday">
                            <input type="checkbox"
                                name="riweeklyweekdays<%=weekday %>"
                                id="<%= name %>weeklyWeekdays<%=weekday %>"
                                value="<%=weekday %>" />
                            <label for="<%= name %>weeklyWeekdays<%= weekday %>"><%= localization.shortWeekdays[weekday] %></label>
                        </div>
                    <% } %>
                </div>
            </div>
            <div id="rimonthlyinterval" class="rifield">
                <label for="rimonthlyinterval" class="label"><%= localization.monthlyInterval1 %></label>
                <div class="field">
                    <input type="text" size="2"
                        value="1"
                        name="rimonthlyinterval"/>
                    <%= localization.monthlyInterval2 %>
                </div>
            </div>
            <div id="rimonthlyoptions" class="rifield">
                <label for="rimonthlytype" class="label"><%= localization.monthlyRepeatOn %></label>
                <div class="field">
                    <div>
                        <input
                            type="radio"
                            value="DAYOFMONTH"
                            name="rimonthlytype"
                            id="<%= name %>monthlytype:DAYOFMONTH" />
                        <label for="<%= name %>monthlytype:DAYOFMONTH">
                            <%= localization.monthlyDayOfMonth1 %>
                        </label>
                        <select name="rimonthlydayofmonthday"
                            id="<%= name %>monthlydayofmonthday">
                        <% for(const val of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
                                18,19,20,21,22,23,24,25,26,27,28,29,30,31]) { %>
                            <option value="<%= val %>"><%= val %></option>
                        <% } %>
                        </select>
                        <%= localization.monthlyDayOfMonth2 %>
                    </div>
                    <div>
                        <input
                            type="radio"
                            value="WEEKDAYOFMONTH"
                            name="rimonthlytype"
                            id="<%= name %>monthlytype:WEEKDAYOFMONTH" />
                        <label for="<%= name %>monthlytype:WEEKDAYOFMONTH">
                            <%= localization.monthlyWeekdayOfMonth1 %>
                        </label>
                        <select name="rimonthlyweekdayofmonthindex">
                            {{each localization.orderIndexes}}
                                <option value="<%= orderIndexes[$index]}">${$value %></option>
                            {{/each}}
                        </select>
                        <%= localization.monthlyWeekdayOfMonth2 %>
                        <select name="rimonthlyweekdayofmonth">
                            {{each orderedWeekdays}}
                                <option value="<%= weekdays[$value]}">${localization.weekdays[$value] %></option>
                            {{/each}}
                        </select>
                        <%= localization.monthlyWeekdayOfMonth3 %>
                    </div>
                </div>
            </div>
            <div id="riyearlyinterval" class="rifield">
                <label for="riyearlyinterval" class="label"><%= localization.yearlyInterval1 %></label>
                <div class="field">
                    <input type="text" size="2"
                        value="1"
                        name="riyearlyinterval"/>
                    <%= localization.yearlyInterval2 %>
                </div>
            </div>
            <div id="riyearlyoptions" class="rifield">
                <label for="riyearlyType" class="label"><%= localization.yearlyRepeatOn %></label>
                <div class="field">
                    <div>
                        <input
                            type="radio"
                            value="DAYOFMONTH"
                            name="riyearlyType"
                            id="<%= name %>yearlytype:DAYOFMONTH" />
                        <label for="<%= name %>yearlytype:DAYOFMONTH">
                            <%= localization.yearlyDayOfMonth1 %>
                        </label>
                        <select name="riyearlydayofmonthmonth">
                        {{each localization.months}}
                            <option value="<%= $index+1}">${$value %></option>
                        {{/each}}
                        </select>
                        <%= localization.yearlyDayOfMonth2 %>
                        <select name="riyearlydayofmonthday">
                        {{each [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,
                                18,19,20,21,22,23,24,25,26,27,28,29,30,31]}}
                            <option value="<%= $value}">${$value %></option>
                        {{/each}}
                        </select>
                        <%= localization.yearlyDayOfMonth3 %>
                    </div>
                    <div>
                        <input
                            type="radio"
                            value="WEEKDAYOFMONTH"
                            name="riyearlyType"
                            id="<%= name %>yearlytype:WEEKDAYOFMONTH"/>
                        <label for="<%= name %>yearlytype:WEEKDAYOFMONTH">
                            <%= localization.yearlyWeekdayOfMonth1 %>
                        </label>
                        <select name="riyearlyweekdayofmonthindex">
                        {{each localization.orderIndexes}}
                            <option value="<%= orderIndexes[$index]}">${$value %></option>
                        {{/each}}
                        </select>
                        <label for="<%= name %>yearlytype:WEEKDAYOFMONTH">
                            <%= localization.yearlyWeekdayOfMonth2 %>
                        </label>
                        <select name="riyearlyweekdayofmonthday">
                        {{each orderedWeekdays}}
                            <option value="<%= weekdays[$value]}">${localization.weekdays[$value] %></option>
                        {{/each}}
                        </select>
                        <%= localization.yearlyWeekdayOfMonth3 %>
                        <select name="riyearlyweekdayofmonthmonth">
                        {{each localization.months}}
                            <option value="<%= $index+1}">${$value %></option>
                        {{/each}}
                        </select>
                        <%= localization.yearlyWeekdayOfMonth4 %>
                    </div>
                </div>
            </div>
            <div id="rirangeoptions" class="rifield">
                <label class="label"><%= localization.range %></label>
                <div class="field">
                    {{if hasRepeatForeverButton}}
                    <div>
                        <input
                            type="radio"
                            value="NOENDDATE"
                            name="rirangetype"
                            id="<%= name %>rangetype:NOENDDATE"/>
                        <label for="<%= name %>rangetype:NOENDDATE">
                            <%= localization.rangeNoEnd %>
                        </label>
                    </div>
                    {{/if}}
                    <div>
                        <input
                            type="radio"
                            checked="checked"
                            value="BYOCCURRENCES"
                            name="rirangetype"
                            id="<%= name %>rangetype:BYOCCURRENCES"/>
                        <label for="<%= name %>rangetype:BYOCCURRENCES">
                            <%= localization.rangeByOccurrences1 %>
                        </label>
                        <input
                            type="text" size="3"
                            value="7"
                            name="rirangebyoccurrencesvalue" />
                        <%= localization.rangeByOccurrences2 %>
                    </div>
                    <div>
                        <input
                            type="radio"
                            value="BYENDDATE"
                            name="rirangetype"
                            id="<%= name %>rangetype:BYENDDATE"/>
                        <label for="<%= name %>rangetype:BYENDDATE">
                            <%= localization.rangeByEndDate %>
                        </label>
                        <input
                            type="date"
                            name="rirangebyenddatecalendar" />
                    </div>
                </div>
            </div>
        </div>
        <div class="rioccurrencesactions">
            <div class="rioccurancesheader">
                <h2><%= localization.preview %></h2>
                <span class="refreshbutton action">
                    <a class="rirefreshbutton" href="#" title="<%= localization.refresh %>">
                        <%= localization.refresh %>
                    </a>
                </span>
            </div>
        </div>
        <div class="rioccurrences">
        </div>
        <div class="rioccurrencesactions">
            <div class="rioccurancesheader">
                <h2><%= localization.addDate %></h2>
            </div>
            <div class="riaddoccurrence">
                <div class="errorarea"></div>
                <input type="date" name="adddate" id="adddate" />
                <input type="button" name="addaction" id="addaction" value="<%= localization.add %>">
            </div>
        </div>

        <div class="ributtons">
            <input
                type="submit"
                class="ricancelbutton <%= ributtonExtraClass %>"
                value="<%= localization.cancel %>" />
            <input
                type="submit"
                class="risavebutton <%= ributtonExtraClass %>"
                value="<%= localization.save %>" />
        </div>
    </form>
</div>
