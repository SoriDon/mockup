<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mockup docs</title>
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <!-- <link rel="stylesheet" href="/mockup/build/bootstrap.min.css" /> -->
    <link rel="stylesheet" href="/mockup/build/filemanager.min.css" />
    <link rel="stylesheet" href="/mockup/build/widgets.min.css" />
    <link rel="stylesheet" href="/mockup/build/structure.min.css" />
    <link rel="stylesheet" href="/main.css" />
    <script src="/mockup/build/plone.min.js"></script>
    <!-- <script src="/config.js"></script>
        <script>
        require = undefined
        define = undefined
    </script> -->
    <!-- <script src="/mockup/build/sinon.js"></script> -->
    <!-- <script type="module">
      import sinon from '/mockup/build/sinon-esm.js';
      </script> -->
    <!-- <script src="/mockup/build/require.js"></script> -->
  </head>
  <body>
    <div id="main-wrapper">
      <nav id="sidebar">
        <ul class="menu">
          <li class="">
            <a class="" href="/">Home</a>
          </li>
          
        </ul>
      </nav>

      <main id="content">
        <h1>Before We Begin</h1>
<p>To build and hack on Mockup you will need recent versions of git, node, npm and make.</p>
<p>Right now development of this project is being done primarily on Linux and OS X,
so setting up the tooling on MS Windows might be an adventure for you to explore --
though, all of the tools used have equivalent versions for that platform,
so with a little effort, it should work!</p>
<h1>Clone and Bootstrap</h1>
<pre><code>$ git clone https://github.com/plone/mockup.git
$ cd mockup
$ make bootstrap
</code></pre>
<p>A note on yarn: We require the use of yarn, because yarn supports installing the packages in a cursom directory, which npm doesn't.
Our package directory is located at: <code>mockup/node_modules</code>.</p>
<p>Now you have the complete source code for all Patterns from Mockup.
From here on you generate bundles of common functionality and minify them.</p>
<p>You're ready to start working on testable,
modular and beautiful JavaScript!</p>
<p>To see it in action, you must compile everything once, with</p>
<pre><code>$ make docs
</code></pre>
<p>and then you open index.html with your browser!</p>
<h1>Get hacking!</h1>
<h2>Mockup Project Structure</h2>
<ul>
<li>
<p><code>build/</code> : Contains all combined, optimized, and minimized JavaScript code,
as well as compiled CSS (Less) and media files</p>
</li>
<li>
<p><code>docs/</code> : Documentation files built with <code>make docs</code></p>
</li>
<li>
<p><code>js/</code> : Contains all of the modularized JavaScript code</p>
<ul>
<li>
<p><code>js/config.js</code> : Contains the RequireJS configuration</p>
</li>
<li>
<p><code>js/bundles</code> : This is where a bundle is defined --
a bundle is a set of requirements,
code that specify the features being packaged and bootstraps your page.</p>
</li>
<li>
<p><code>js/patterns</code> : Contains all individual, encapsulated patterns
e.g. widgets.js</p>
</li>
</ul>
</li>
<li>
<p><code>less/</code> : Contains all the <a href="http://lesscss.org/">Less</a> code for all the patterns and bundles</p>
</li>
<li>
<p><code>lib/</code> : Contains external libraries not necessarily found in <code>mockup/node_modules</code>.</p>
</li>
<li>
<p><code>tests/</code> : Contains all tests for patterns and bundles, including general setup and configuration code</p>
</li>
<li>
<p><code>Gruntfile.js</code> : Defines the directives for compiling Less,
and for combining/optimizing/minimizing JavaScript to the defined bundles</p>
</li>
<li>
<p><code>index.html</code> : The main source of documentation for the mockup project</p>
</li>
<li>
<p><code>Makefile</code> : Scripts to build bundles, bootstrap the environment etc.</p>
</li>
</ul>
<h2>What's a Pattern? What Are Bundles? How do they relate?</h2>
<p><code>Patterns</code> are units of JavaScript,
defined by a RequireJS/AMD style module.
Patterns may require other patterns to operate,
and may also require third party libraries.
Think of a pattern as a module -- encapsulated and separate,
and providing a widget or tool to be used by other patterns or in html.</p>
<p><code>Bundles</code> are defined in a similar way to <em>Patterns</em> --
they are encapsulated bits of JavaScript that define requirements for a bundle and have some extra code in them that's useful for integrating the required patterns into Plone products.</p>
<p>Have a look at the <a href="#learn">HelloWorld</a> example to see how to create your own Pattern and then how to bundle, test, build and use it.</p>
<h1>Bundling</h1>
<p>To build all bundles:</p>
<pre><code>make bundles
</code></pre>
<p>To build one bundle:</p>
<pre><code>make bundle-widgets
</code></pre>
<h1>Testing</h1>
<p>You can run tests with:</p>
<pre><code>make test
</code></pre>
<p>This will start a process which runs the tests when you change any of the js files.</p>
<p>If you just want to run tests just once you can use:</p>
<pre><code>make test-once
</code></pre>
<p>For debugging, or testing in a chrome browser use the following and open <a href="localhost:9876">localhost:9876</a></p>
<pre><code>make test-dev
</code></pre>
<p>If you want to just run the tests for a particular pattern you can use:</p>
<pre><code>make test pattern=foobar
</code></pre>
<p>or:</p>
<pre><code>make test-once pattern=foobar
</code></pre>
<p>or:</p>
<pre><code>make test-dev pattern=foobar
</code></pre>
<p>These will run only the tests that end with foobar-test.js</p>
<p>You can pass the <code>verbose=true</code> and <code>debug=true</code> command line options to
increase log output.</p>
<h1>Creating docs</h1>
<p>First, build the documentation with:</p>
<pre><code>make docs
</code></pre>
<p>Then, start the python test server like so:</p>
<pre><code>python -m SimpleHTTPServer
</code></pre>
<p>After that, access the served site in a webbrowser under the url:</p>
<pre><code>http://localhost:8000
</code></pre>
<h1>Upgrade from pre-2.0 to 2.0 based Mockup patterns</h1>
<p>Since version 2.0, Mockup uses the Patternslib scanner and it's registry. This
allows us to: Use Patternslib patterns with Mockup/Plone and use Mockup
patterns with Patternslib outside of Plone. The integration with Patternslib
require that some small changes be made to newly developed Mockup patterns:</p>
<ol>
<li>
<p>Patterns should now use pat-registry as dependency instead of
mockup-registry.</p>
<pre><code> define([
     'jquery'
     'pat-base',
     'pat-registry'
 ], function($, Base, registry) {
</code></pre>
</li>
<li>
<p>Patterns' selectors are now explicitly specified via the trigger attribute.
For example:</p>
<pre><code>var Modal = Base.extend({
  name: 'modal',
  trigger: '.pat-modal',
</code></pre>
</li>
<li>
<p>Because of change 2, patterns now fire events via the emit method, instead
of the trigger method.</p>
</li>
</ol>

      </main>
    </div>
  </body>
</html>
